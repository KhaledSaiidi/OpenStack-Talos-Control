[[local|localrc]]
HOST_IP={{ ansible_host }}
ADMIN_PASSWORD={{ openstack_secret }}
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD

# Enable controller services
ENABLED_SERVICES=key,mysql,rabbit,placement,glance-api,nova-api,neutron,cinder,horizon

# Cinder workers
ENABLED_SERVICES+=,c-api,c-vol,c-sch

# Neutron configuration
ENABLED_SERVICES+=,q-svc,q-agt,q-dhcp,q-l3,q-meta
Q_PLUGIN=ml2
Q_AGENT=openvswitch
NEUTRON_CREATE_INITIAL_NETWORKS=True

# Point to compute and storage nodes
COMPUTE_HOSTS={{ groups['computes'] | map('extract', hostvars, 'ansible_host') | join(',') }}
CINDER_HOSTS={{ groups['storage'] | map('extract', hostvars, 'ansible_host') | join(',') }}